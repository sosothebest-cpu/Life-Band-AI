<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LifeBand AI - Sign Up</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  --primary: #4a6cfa;
  --primary-dark: #3a56d8;
  --secondary: #ff6b6b;
  --accent: #0ff;
  --dark: #1a1a2e;
  --darker: #0f0f1a;
  --light: #f8f9fa;
  --gray: #6c757d;
  --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
  --gradient-light: linear-gradient(135deg, #6a8cff, #ff8b8b);
  --shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 20px 50px rgba(0, 0, 0, 0.15);
  --transition: all 0.3s ease;
  --border-radius: 16px;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', sans-serif;
  background-color: var(--darker);
  color: var(--light);
  line-height: 1.6;
  overflow-x: hidden;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
}

#tsparticles {
  position: fixed;
  width: 100%;
  height: 100%;
  z-index: -1;
}

.login-container {
  display: flex;
  width: 100%;
  max-width: 1000px;
  min-height: 650px;
  background: rgba(26, 26, 46, 0.8);
  backdrop-filter: blur(15px);
  border-radius: var(--border-radius);
  overflow: hidden;
  box-shadow: var(--shadow-lg);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* LEFT SIDE */
.login-left {
  flex: 1;
  background: var(--gradient);
  padding: 3rem;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  position: relative;
  overflow: hidden;
}

.login-left::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" width="100" height="100" opacity="0.1"><path fill="white" d="M30,30 Q50,10 70,30 T90,50 T70,70 T50,90 T30,70 T10,50 T30,30 Z"/></svg>');
  background-size: 200px;
  opacity: 0.1;
}

.logo {
  display: flex;
  align-items: center;
  gap: 1rem;
  position: relative;
  z-index: 1;
}

.logo-icon {
  width: 50px;
  height: 50px;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  font-size: 1.2rem;
  color: white;
  transition: var(--transition);
}

.logo:hover .logo-icon {
  transform: rotate(5deg) scale(1.05);
}

.logo-text h1 {
  font-family: 'Orbitron', sans-serif;
  font-size: 1.5rem;
  margin-bottom: 0.2rem;
  color: white;
}

.logo-text p {
  font-size: 0.8rem;
  color: rgba(255, 255, 255, 0.8);
  margin-bottom: 0;
}

.login-left-content {
  position: relative;
  z-index: 1;
  margin-top: 2rem;
}

.login-left-content h2 {
  font-family: 'Orbitron', sans-serif;
  font-size: 2rem;
  margin-bottom: 1rem;
  color: white;
}

.login-left-content p {
  color: rgba(255, 255, 255, 0.9);
  margin-bottom: 1.5rem;
}

.features-list {
  list-style: none;
  margin-top: 2rem;
}

.features-list li {
  display: flex;
  align-items: center;
  margin-bottom: 1rem;
  color: rgba(255, 255, 255, 0.9);
}

.features-list i {
  margin-right: 0.8rem;
  color: white;
  width: 20px;
  text-align: center;
}

.quote {
  position: relative;
  z-index: 1;
  font-style: italic;
  color: rgba(255, 255, 255, 0.9);
  margin-top: auto;
  padding-top: 2rem;
  border-top: 1px solid rgba(255, 255, 255, 0.2);
}

.quote p:last-child {
  font-weight: 600;
  margin-top: 0.5rem;
}

/* RIGHT SIDE */
.login-right {
  flex: 1;
  padding: 3rem;
  display: flex;
  flex-direction: column;
  justify-content: center;
}

.login-header {
  text-align: center;
  margin-bottom: 2.5rem;
}

.login-header h2 {
  font-family: 'Orbitron', sans-serif;
  font-size: 2rem;
  margin-bottom: 0.5rem;
  background: var(--gradient);
  -webkit-background-clip: text;
  background-clip: text;
  -webkit-text-fill-color: transparent;
}

.login-header p {
  color: var(--gray);
}

.login-form {
  width: 100%;
}

.form-group {
  margin-bottom: 1.5rem;
  position: relative;
}

.form-label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
  color: var(--light);
}

.form-input {
  width: 100%;
  padding: 1rem 1.2rem;
  border-radius: var(--border-radius);
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.05);
  color: var(--light);
  font-family: 'Inter', sans-serif;
  font-size: 1rem;
  transition: var(--transition);
}

.form-input:focus {
  outline: none;
  border-color: var(--primary);
  background: rgba(255, 255, 255, 0.08);
  box-shadow: 0 0 0 3px rgba(74, 108, 250, 0.2);
}

.form-input.error {
  border-color: var(--secondary);
}

.password-strength {
  height: 4px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 2px;
  margin-top: 0.5rem;
  overflow: hidden;
}

.strength-bar {
  height: 100%;
  width: 0%;
  transition: var(--transition);
}

.strength-weak {
  background: var(--secondary);
  width: 33%;
}

.strength-medium {
  background: #ffa500;
  width: 66%;
}

.strength-strong {
  background: #4CAF50;
  width: 100%;
}

.password-requirements {
  margin-top: 0.5rem;
  font-size: 0.8rem;
  color: var(--gray);
}

.requirement {
  display: flex;
  align-items: center;
  margin-bottom: 0.2rem;
}

.requirement i {
  margin-right: 0.5rem;
  font-size: 0.7rem;
  width: 12px;
}

.requirement.met {
  color: #4CAF50;
}

.requirement.unmet {
  color: var(--gray);
}

.btn {
  padding: 1rem 1.5rem;
  border-radius: var(--border-radius);
  text-decoration: none;
  font-weight: 600;
  transition: var(--transition);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  border: none;
  cursor: pointer;
  font-family: 'Inter', sans-serif;
  font-size: 1rem;
  width: 100%;
  position: relative;
}

.btn-primary {
  background: var(--gradient);
  color: white;
  box-shadow: var(--shadow);
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.btn:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none !important;
}

.btn-text {
  transition: var(--transition);
}

.loading-spinner {
  display: none;
  margin-right: 0.5rem;
}

.btn.loading .btn-text {
  opacity: 0.7;
}

.btn.loading .loading-spinner {
  display: inline-block;
}

.divider {
  display: flex;
  align-items: center;
  margin: 2rem 0;
  color: var(--gray);
}

.divider::before, .divider::after {
  content: '';
  flex: 1;
  height: 1px;
  background: rgba(255, 255, 255, 0.1);
}

.divider span {
  padding: 0 1rem;
  font-size: 0.9rem;
}

.social-buttons {
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
}

.btn-social {
  flex: 1;
  padding: 0.8rem;
  border-radius: var(--border-radius);
  border: 1px solid rgba(255, 255, 255, 0.1);
  background: rgba(255, 255, 255, 0.05);
  color: var(--light);
  font-weight: 500;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  cursor: pointer;
}

.btn-social:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateY(-2px);
}

.btn-google:hover {
  border-color: #DB4437;
  color: #DB4437;
}

.btn-facebook:hover {
  border-color: #4267B2;
  color: #4267B2;
}

.btn-apple:hover {
  border-color: #A2AAAD;
  color: #A2AAAD;
}

.login-footer {
  text-align: center;
  margin-top: auto;
  padding-top: 2rem;
  color: var(--gray);
}

.login-footer a {
  color: var(--primary);
  text-decoration: none;
  font-weight: 500;
  transition: var(--transition);
}

.login-footer a:hover {
  color: var(--accent);
}

/* Toast */
.toast {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  padding: 1rem 1.5rem;
  border-radius: var(--border-radius);
  color: white;
  font-weight: 500;
  box-shadow: var(--shadow-lg);
  transform: translateY(100px);
  opacity: 0;
  transition: var(--transition);
  z-index: 1000;
  max-width: 350px;
}

.toast.show {
  transform: translateY(0);
  opacity: 1;
}

.toast.success {
  background: #4CAF50;
}

.toast.error {
  background: var(--secondary);
}

.toast.info {
  background: var(--primary);
}

/* Theme Toggle */
.theme-toggle {
  position: fixed;
  top: 2rem;
  right: 2rem;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: var(--gradient);
  color: white;
  border: none;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: var(--shadow);
  transition: var(--transition);
  z-index: 100;
}

.theme-toggle:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-lg);
}

/* Responsive */
@media (max-width: 768px) {
  .login-container {
    flex-direction: column;
    min-height: auto;
  }
  
  .login-left {
    padding: 2rem;
  }
  
  .login-right {
    padding: 2rem;
  }
  
  .social-buttons {
    flex-direction: column;
  }
  
  .theme-toggle {
    top: 1rem;
    right: 1rem;
    width: 40px;
    height: 40px;
  }
  
  .toast {
    bottom: 1rem;
    right: 1rem;
    left: 1rem;
    max-width: none;
  }
}
</style>
</head>

<body>

<div id="tsparticles"></div>

<div class="login-container">

  <!-- LEFT SIDE -->
  <div class="login-left">
    <div class="logo">
      <div class="logo-icon">LB</div>
      <div class="logo-text">
        <h1>LifeBand AI</h1>
        <p>Smart Safety Wristband</p>
      </div>
    </div>

    <div class="login-left-content">
      <h2>Protect What Matters Most</h2>
      <p>Join thousands of families who trust LifeBand AI to keep their loved ones safe with advanced AI monitoring.</p>
      
      <ul class="features-list">
        <li><i class="fas fa-check-circle"></i> 24/7 Health Monitoring</li>
        <li><i class="fas fa-check-circle"></i> Instant Emergency Alerts</li>
        <li><i class="fas fa-check-circle"></i> Advanced Fall Detection</li>
        <li><i class="fas fa-check-circle"></i> Real-time GPS Tracking</li>
      </ul>
    </div>

    <div class="quote">
      <p>"Start taking care of your loved ones smarter"</p>
      <p>- LifeBand Team</p>
    </div>
  </div>

  <!-- RIGHT SIDE -->
  <div class="login-right">

    <div class="login-header">
      <h2>Create Account</h2>
      <p>Fill the form below to get started</p>
    </div>

    <form class="login-form" id="signupForm">

      <div class="form-group">
        <label class="form-label" for="fullname">Full Name</label>
        <input type="text" id="fullname" class="form-input" placeholder="Enter your full name" required>
      </div>

      <div class="form-group">
        <label class="form-label" for="email">Email</label>
        <input type="email" id="email" class="form-input" placeholder="Enter your email" required>
      </div>

      <div class="form-group">
        <label class="form-label" for="password">Password</label>
        <input type="password" id="password" class="form-input" placeholder="Create a password" required>
        <div class="password-strength">
          <div class="strength-bar" id="strengthBar"></div>
        </div>
        <div class="password-requirements" id="passwordRequirements">
          <div class="requirement unmet" id="reqLength"><i class="fas fa-circle"></i> At least 8 characters</div>
          <div class="requirement unmet" id="reqUpper"><i class="fas fa-circle"></i> One uppercase letter</div>
          <div class="requirement unmet" id="reqLower"><i class="fas fa-circle"></i> One lowercase letter</div>
          <div class="requirement unmet" id="reqNumber"><i class="fas fa-circle"></i> One number</div>
        </div>
      </div>

      <div class="form-group">
        <label class="form-label" for="confirm">Confirm Password</label>
        <input type="password" id="confirm" class="form-input" placeholder="Re-enter password" required>
      </div>

      <button type="submit" class="btn btn-primary" id="signupBtn">
        <span class="loading-spinner">
          <i class="fas fa-spinner fa-spin"></i>
        </span>
        <span class="btn-text">Create Account</span>
      </button>

      <!-- Social Sign Up -->
      <div class="divider"><span>Or sign up with</span></div>

      <div class="social-buttons">
        <button type="button" class="btn-social btn-google">
          <i class="fab fa-google"></i><span>Google</span>
        </button>
        <button type="button" class="btn-social btn-facebook">
          <i class="fab fa-facebook-f"></i><span>Facebook</span>
        </button>
        <button type="button" class="btn-social btn-apple">
          <i class="fab fa-apple"></i><span>Apple</span>
        </button>
      </div>

    </form>

    <div class="login-footer">
      <p>Already have an account? <a href="login.html">Login</a></p>
    </div>

  </div>
</div>

<div class="toast" id="toast"></div>
<button class="theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></button>

<script src="https://cdn.jsdelivr.net/npm/tsparticles@2.11.1/tsparticles.bundle.min.js"></script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, GoogleAuthProvider, signInWithPopup, signOut } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
import { getFirestore, setDoc, doc } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyDBZ1937IbLViR2MXYYMKqxZKDyUyj9IqY",
  authDomain: "life-band-ai.firebaseapp.com",
  projectId: "life-band-ai",
  storageBucket: "life-band-ai.firebasestorage.app",
  messagingSenderId: "629516132408",
  appId: "1:629516132408:web:2e785ce826ddb57a5686cd",
  measurementId: "G-FX93K55JQN"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

// Password strength checker
const passwordInput = document.getElementById('password');
const strengthBar = document.getElementById('strengthBar');
const requirements = {
  length: document.getElementById('reqLength'),
  upper: document.getElementById('reqUpper'),
  lower: document.getElementById('reqLower'),
  number: document.getElementById('reqNumber')
};

passwordInput.addEventListener('input', function() {
  const password = this.value;
  let strength = 0;
  
  // Check requirements
  const hasLength = password.length >= 8;
  const hasUpper = /[A-Z]/.test(password);
  const hasLower = /[a-z]/.test(password);
  const hasNumber = /[0-9]/.test(password);
  
  // Update requirement indicators
  requirements.length.className = hasLength ? 'requirement met' : 'requirement unmet';
  requirements.upper.className = hasUpper ? 'requirement met' : 'requirement unmet';
  requirements.lower.className = hasLower ? 'requirement met' : 'requirement unmet';
  requirements.number.className = hasNumber ? 'requirement met' : 'requirement unmet';
  
  // Calculate strength
  if (hasLength) strength += 25;
  if (hasUpper) strength += 25;
  if (hasLower) strength += 25;
  if (hasNumber) strength += 25;
  
  // Update strength bar
  strengthBar.className = 'strength-bar';
  if (strength <= 25) {
    strengthBar.classList.add('strength-weak');
  } else if (strength <= 75) {
    strengthBar.classList.add('strength-medium');
  } else {
    strengthBar.classList.add('strength-strong');
  }
});

// Sign Up Form
const form = document.getElementById("signupForm");
const signupBtn = document.getElementById("signupBtn");

form.addEventListener("submit", async (e) => {
    e.preventDefault();
    
    // Show loading state
    signupBtn.classList.add('loading');
    signupBtn.disabled = true;

    const fullname = document.getElementById("fullname").value.trim();
    const email = document.getElementById("email").value;
    const pass = document.getElementById("password").value;
    const confirm = document.getElementById("confirm").value;

    // Validation
    if(fullname.length < 3){
        showToast("Full name must be at least 3 characters!", "error");
        resetButtonState();
        return;
    }

    const strongPass = /^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9]).{8,}$/;
    if(!strongPass.test(pass)){
        showToast("Password must be at least 8 characters & include uppercase, lowercase & numbers", "error");
        resetButtonState();
        return;
    }

    if(pass !== confirm){
        showToast("Passwords do not match!", "error");
        resetButtonState();
        return;
    }

    try {
        const userCred = await createUserWithEmailAndPassword(auth, email, pass);
        const uid = userCred.user.uid;

        await setDoc(doc(db, "users", uid), {
            uid,
            name: fullname,
            email,
            createdAt: new Date(),
        });

        // إظهار رسالة النجاح مباشرة بدون تسجيل خروج
        showToast("Account created successfully! Redirecting to login page...", "success");
        
        // الانتظار 3 ثواني ثم التوجيه لصفحة login
        setTimeout(() => {
            window.location.href = "login.html";
        }, 3000);

    } catch(error) {
        resetButtonState();
        console.error("Error details:", error);
        
        if(error.code === "auth/email-already-in-use"){
            showToast("Email already in use. Try logging in!", "error");
        } else if(error.code === "auth/invalid-email") {
            showToast("Invalid email address format.", "error");
        } else if(error.code === "auth/weak-password") {
            showToast("Password is too weak. Please use a stronger password.", "error");
        } else {
            showToast("Error creating account: " + error.message, "error");
        }
    }
});

// Google Sign-In
const googleBtn = document.querySelector(".btn-google");
googleBtn.addEventListener("click", async () => {
    const provider = new GoogleAuthProvider();
    try {
        const result = await signInWithPopup(auth, provider);
        const user = result.user;

        await setDoc(doc(db, "users", user.uid), {
            uid: user.uid,
            name: user.displayName,
            email: user.email,
            photoURL: user.photoURL,
            createdAt: new Date(),
        }, { merge: true });

        // إظهار رسالة النجاح
        showToast("Account created successfully! Redirecting to login page...", "success");
        
        // الانتظار 3 ثواني ثم التوجيه لصفحة login
        setTimeout(() => {
            window.location.href = "login.html";
        }, 3000);

    } catch(error) {
        console.error("Google sign in error:", error);
        showToast("Error signing up with Google: " + error.message, "error");
    }
});

// Facebook and Apple buttons (placeholder)
document.querySelector(".btn-facebook").addEventListener("click", () => {
    showToast("Facebook sign up coming soon!", "info");
});

document.querySelector(".btn-apple").addEventListener("click", () => {
    showToast("Apple sign up coming soon!", "info");
});

// Toast Function
function showToast(message, type = "success") {
    const toast = document.getElementById("toast");
    toast.textContent = message;
    toast.className = "toast " + type + " show";
    setTimeout(() => { toast.classList.remove("show"); }, 4000);
    console.log("Toast shown:", message); // للتأكد من ظهور الرسالة
}

// Reset button state
function resetButtonState() {
    signupBtn.classList.remove('loading');
    signupBtn.disabled = false;
}

// Theme Toggle
const themeToggle = document.getElementById("themeToggle");
themeToggle.addEventListener("click", () => {
    document.body.classList.toggle("light-theme");
    const icon = themeToggle.querySelector("i");
    if (document.body.classList.contains("light-theme")) {
        icon.classList.replace("fa-moon", "fa-sun");
        document.body.style.backgroundColor = "#f5f5f7";
        document.body.style.color = "#333";
    } else {
        icon.classList.replace("fa-sun", "fa-moon");
        document.body.style.backgroundColor = "";
        document.body.style.color = "";
    }
});

// Particles
tsParticles.load("tsparticles", {
    fpsLimit: 60,
    particles: {
        color: { value: "#4a6cfa" },
        links: {
            color: "#4a6cfa",
            distance: 150,
            enable: true,
            opacity: 0.2,
            width: 1
        },
        move: {
            enable: true,
            speed: 1
        },
        number: {
            density: {
                enable: true,
                area: 800
            },
            value: 80
        },
        opacity: {
            value: 0.2
        },
        size: {
            value: { min: 1, max: 3 }
        }
    },
    detectRetina: true
});
</script>
</body>
</html>